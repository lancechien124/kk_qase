# ðŸš€ MeterSphere Python Backend - å¿«é€Ÿå•Ÿå‹•æŒ‡å—

## æœ€ç°¡å–®çš„æ–¹å¼ï¼šä¸€éµå•Ÿå‹•

```bash
cd backend_python
./start.sh
```

é€™å€‹è…³æœ¬æœƒè‡ªå‹•å®Œæˆæ‰€æœ‰æ­¥é©Ÿï¼

---

## æ‰‹å‹•å•Ÿå‹•æ­¥é©Ÿ

### æ­¥é©Ÿ 1: é€²å…¥é …ç›®ç›®éŒ„

```bash
cd metersphere/backend_python
```

### æ­¥é©Ÿ 2: å‰µå»ºç’°å¢ƒè®Šé‡æ–‡ä»¶

```bash
cat > .env << 'EOF'
# Application
DEBUG=True
LOG_LEVEL=INFO

# Database
DATABASE_URL=mysql+pymysql://root:password@mysql:3306/metersphere?charset=utf8mb4
MYSQL_ROOT_PASSWORD=password

# Redis
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=

# Kafka
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# MinIO
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# Security (ç”Ÿç”¢ç’°å¢ƒå¿…é ˆä¿®æ”¹)
SECRET_KEY=change-this-secret-key-in-production
JWT_SECRET_KEY=change-this-jwt-secret-key-in-production
EOF
```

### æ­¥é©Ÿ 3: å•Ÿå‹•æ‰€æœ‰æœå‹™

```bash
# æ§‹å»ºä¸¦å•Ÿå‹•ï¼ˆé¦–æ¬¡å•Ÿå‹•æœƒæ§‹å»ºé¡åƒï¼Œéœ€è¦å¹¾åˆ†é˜ï¼‰
docker-compose up -d --build

# æŸ¥çœ‹æœå‹™ç‹€æ…‹
docker-compose ps
```

### æ­¥é©Ÿ 4: ç­‰å¾…æœå‹™å•Ÿå‹•

```bash
# ç­‰å¾…ç´„ 30-60 ç§’è®“æ‰€æœ‰æœå‹™å®Œå…¨å•Ÿå‹•
sleep 30

# æª¢æŸ¥æœå‹™ç‹€æ…‹
docker-compose ps
```

### æ­¥é©Ÿ 5: åˆå§‹åŒ–æ•¸æ“šåº«

```bash
# é‹è¡Œæ•¸æ“šåº«é·ç§»
docker-compose exec backend python -m alembic upgrade head
```

### æ­¥é©Ÿ 6: é©—è­‰å®‰è£

```bash
# æª¢æŸ¥å¥åº·ç‹€æ…‹
curl http://localhost:8081/api/v1/health

# æˆ–ä½¿ç”¨ç€è¦½å™¨è¨ªå•
# http://localhost:8081/api/v1/health
```

---

## ðŸŒ è¨ªå•åœ°å€

å•Ÿå‹•æˆåŠŸå¾Œï¼Œå¯ä»¥è¨ªå•ï¼š

- **API å¥åº·æª¢æŸ¥**: http://localhost:8081/api/v1/health
- **Swagger æ–‡æª”**: http://localhost:8081/api/docs
- **ReDoc æ–‡æª”**: http://localhost:8081/api/redoc
- **æŒ‡æ¨™ç«¯é»ž**: http://localhost:8081/api/v1/metrics

---

## ðŸ“‹ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æ—¥èªŒ

```bash
# æŸ¥çœ‹æ‰€æœ‰æœå‹™æ—¥èªŒ
docker-compose logs -f

# æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ
docker-compose logs -f backend

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥èªŒ
docker-compose logs --tail=100 backend
```

### åœæ­¢å’Œé‡å•Ÿ

```bash
# åœæ­¢æ‰€æœ‰æœå‹™
docker-compose down

# åœæ­¢ä¸¦åˆªé™¤æ•¸æ“šï¼ˆæœƒåˆªé™¤æ‰€æœ‰æ•¸æ“šï¼‰
docker-compose down -v

# é‡å•Ÿæœå‹™
docker-compose restart

# é‡å•Ÿç‰¹å®šæœå‹™
docker-compose restart backend
```

### é€²å…¥å®¹å™¨

```bash
# é€²å…¥å¾Œç«¯å®¹å™¨
docker-compose exec backend bash

# åŸ·è¡Œ Python å‘½ä»¤
docker-compose exec backend python -c "print('Hello')"

# é‹è¡Œæ•¸æ“šåº«é·ç§»
docker-compose exec backend python -m alembic upgrade head
```

---

## ðŸ› æ•…éšœæŽ’æŸ¥

### 1. ç«¯å£è¢«å ç”¨

```bash
# æª¢æŸ¥ç«¯å£
lsof -i :8081
lsof -i :3306

# å¦‚æžœç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„
```

### 2. æ•¸æ“šåº«é€£æŽ¥å¤±æ•—

```bash
# æª¢æŸ¥ MySQL å®¹å™¨
docker-compose logs mysql

# ç­‰å¾… MySQL å®Œå…¨å•Ÿå‹•
sleep 30
docker-compose exec backend python -m alembic upgrade head
```

### 3. æœå‹™ç„¡æ³•å•Ÿå‹•

```bash
# æŸ¥çœ‹è©³ç´°æ—¥èªŒ
docker-compose logs backend

# æª¢æŸ¥å®¹å™¨ç‹€æ…‹
docker-compose ps -a

# é‡å•Ÿæœå‹™
docker-compose restart backend
```

### 4. æ§‹å»ºå¤±æ•—

```bash
# æ¸…ç†æ§‹å»ºç·©å­˜
docker-compose build --no-cache

# é‡æ–°æ§‹å»º
docker-compose up -d --build
```

---

## âœ… é©—è­‰é‹è¡Œ

é‹è¡Œé©—è­‰è…³æœ¬ç¢ºèªæ‰€æœ‰æ¨¡çµ„æ­£å¸¸ï¼š

```bash
docker-compose exec backend python scripts/verify.py
```

æ‡‰è©²çœ‹åˆ°ï¼š

```
âœ“ All modules verified successfully!
```

---

## ðŸŽ‰ å®Œæˆï¼

å¦‚æžœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨ç¾åœ¨å¯ä»¥ï¼š

1. âœ… è¨ªå• API æ–‡æª”: http://localhost:8081/api/docs
2. âœ… ä½¿ç”¨æ‰€æœ‰ API ç«¯é»ž
3. âœ… æ‰€æœ‰æœå‹™æ­£å¸¸é‹è¡Œ

é–‹å§‹ä½¿ç”¨ MeterSphere Python Backendï¼

